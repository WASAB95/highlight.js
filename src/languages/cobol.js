/*
Language: cobol
Author: Walid Sabouni <walid.sabouni@hotmail.com>
Description: syntax highlighting
*/


function(hljs) {
  //https://www.ibm.com/support/knowledgecenter/en/SSZJPZ_8.7.0/com.ibm.swg.im.iis.ds.mfjob.dev.doc/topics/r_dmnjbref_COBOL_Reserved_Words.html
  var COBOL_KEYWORDS = `ACCEPT
ACCESS
ADD
ADDRESS
ADVANCING
AFTER
ALL
ALPHABET
ALPHABETIC
ALPHABETIC-LOWER|10
ALPHABETIC-UPPER|10
ALPHANUMERIC
ALPHANUMERIC-EDITED|10
ALSO
ALTER
ALTERNATE
AND
ANY
APPLY
ARE
AREA
AREAS
ASCENDING
ASSIGN
AT
AUTHOR
BASIS
BEFORE
BEGINNING
BINARY
BLANK
BLOCK
BOTTOM
BY
CALL
CANCEL
CBL
CD
CF
CH
CHARACTER
CHARACTERS
CLASS|0
CLASS-ID|10
CLOCK-UNITS|10
CLOSE
COBOL
CODE
CODE-SETCODE-SET|10
COLLATING
COLUMN
COM-REG|10
COMMA
COMMON
COMMUNICATION
COMP
COMP-1|10
COMP-2|10
COMP-3|10
COMP-4|10
COMP-5|10
COMPUTATIONAL
COMPUTATIONAL-1|10
COMPUTATIONAL-2|10
COMPUTATIONAL-3|10
COMPUTATIONAL-4|10
COMPUTATIONAL-5|10
COMPUTE
CONFIGURATION
CONTAINS
CONTENT
CONTINUE|0
CONTROL
CONTROLS
CONVERTING
COPY
CORR
CORRESPONDING
COUNT
CURRENCY
DATA
DATE-COMPILED|10
DATE-WRITTEN|10
DAY
DAY-OF-WEEK|10
DBCS
DE
DEBUG-CONTENTS
DEBUG-ITEM
DEBUG-LINE
DEBUG-NAME
DEBUG-SUB-1
DEBUG-SUB-2
DEBUG-SUB-3
DEBUGGING
DECIMAL-POINT
DECLARATIVES
DELETE
DELIMITED
DELIMITER
DEPENDING
DESCENDING
DESTINATION
DETAIL
DISPLAY
DISPLAY-1
DIVIDE
DIVISION|10
DOWN
DUPLICATES
DYNAMIC
EGCS
EGI
EJECT
ELSE
EMI
ENABLE
END
END-ADD|10
END-CALL|10
END-COMPUTE|10
END-DELETE|10
END-DIVIDE|10
END-EVALUATE|10
END-IF|10
END-INVOKE|10
END-MULTIPLY|10
END-OF-PAGE|10
END-PERFORM|10
END-READ|10
END-RECEIVE|10
END-RETURN|10
END-REWRITE|10
END-SEARCH|10
END-START|10
END-STRING|10
END-SUBTRACT|10
END-UNSTRING|10
END-WRITE|10
ENDING
ENTER
ENTRY
ENVIRONMENT
EOP
EQUAL
ERROR
ESI
EVALUATE
EVERY
EXCEPTION
EXIT
EXTEND
EXTERNAL
FALSE
FD
FILE
FILE-CONTROL
FILLER
FINAL
FIRST
FOOTING
FOR|0
FROM
FUNCTION
GENERATE
GIVING
GLOBAL
GO
GOBACK
GREATER
GROUP
HEADING
HIGH-VALUE
HIGH-VALUES
I-O|10
I-O-CONTROL|10
ID
IDENTIFICATION|10
IF
IN
INDEX|0
INDEXED
INDICATE
INHERITS
INITIAL
INITIALIZE
INITIATE
INPUT
INPUT-OUTPUT
INSERT
INSPECT
INSTALLATION
INTO
INVALID
INVOKE
IS
JUST
JUSTIFIED
KANJI
KEY
LABEL
LAST
LEADING
LEFT
LENGTH
LESS
LIMIT
LIMITS
LINAGE
LINAGE-COUNTER|10
LINE|0
LINE-COUNTER|10
LINES
LINKAGE|10
LOCAL-STORAGE|10
LOCK
LOW-VALUE|10
LOW-VALUES|10
MEMORY
MERGE
MESSAGE
METACLASS
METHOD
METHOD-ID|10
MODE
MODULES
MORE-LABELS|10
MOVE
MULTIPLE
MULTIPLY
NATIVE
NATIVE_BINARY
NEGATIVE
NEXT
NO
NOT
NULL
NULLS
NUMBER
NUMERIC
NUMERIC-EDITED
OBJECT|0
OBJECT-COMPUTER
OCCURS
OF
OFF
OMITTED
ON
OPEN
OPTIONAL
OR
ORDER
ORGANIZATION
OTHER
OUTPUT
OVERFLOW
OVERRIDE
PACKED-DECIMAL
PADDING
PAGE
PAGE-COUNTER
PASSWORD
PERFORM
PF
PH
PIC
PICTURE
PLUS
POINTER
POSITION
POSITIVE
PRINTING
PROCEDURE
PROCEDURE-POINTER
PROCEDURES
PROCEED
PROCESSING
PROGRAM
PROGRAM-ID|10
PURGE
QUEUE
QUOTE
QUOTES
RANDOM
RD
READ
READY
RECEIVE
RECORD
RECORDING
RECORDS
RECURSIVE
REDEFINES
REEL
REFERENCE
REFERENCES
RELATIVE
RELEASE
RELOAD
REMAINDER
REMOVAL
RENAMES
REPLACE
REPLACING
REPORT
REPORTING
REPORTS
REPOSITORY
RERUN
RESERVE
RESET
RETURN|0
RETURN-CODE
RETURNING
REVERSED
REWIND
REWRITE
RF
RH
RIGHT
ROUNDED
RUN
SAME
SD
SEARCH
SECTION
SECURITY
SEGMENT
SEGMENT-LIMIT
SELECT
SELF
SEND
SENTENCE
SEPARATE
SEQUENCE
SEQUENTIAL
SERVICE
SET
SHIFT-IN
SHIFT-OUT
SIGN
SIZE
SKIP1
SKIP2
SKIP3
SORT
SORT-CONTROL
SORT-CORE-SIZE
SORT-FILE-SIZE
SORT-MERGE
SORT-MESSAGE
SORT-MODE-SIZE
SORT-RETURN
SOURCE
SOURCE-COMPUTER
SPACE
SPACES
SPECIAL-NAMES
STANDARD
STANDARD-1
STANDARD-2
START
STATUS
STOP
STRING
SUB-QUEUE-1
SUB-QUEUE-2
SUB-QUEUE-3
SUBTRACT
SUM
SUPER
SUPPRESS
SYMBOLIC
SYNC
SYNCHRONIZED
TABLE
TALLY
TALLYING
TAPE
TERMINAL
TERMINATE
TEST
TEXT
THAN
THEN
THROUGH
THRU
TIME
TIMES
TITLE
TO
TOP
TRACE
TRAILING
TRUE
TYPE
UNIT
UNSTRING
UNTIL
UP
UPON
USAGE
USE
USING
VALUE
VALUES
VARYING
WHEN
WHEN-COMPILED
WITH
WORDS
WORKING-STORAGE|10
WRITE
WRITE-ONLY
ZERO
ZEROES
ZEROS`


var COBOL_BUILT_IN_Keywords = `ADD
CALL
COMPUTE
DELETE
DIVIDE
EVALUATE
IF
INVOKE
MULTIPLY
OF-PAGE
PERFORM
READ
RECEIVE
RETURN
REWRITE
SEARCH
START
STRING
SUBTRACT
UNSTRING
WRITE
END-ADD|10
END-CALL|10
END-COMPUTE|10
END-DELETE|10
END-DIVIDE|10
END-EVALUATE|10
END-IF|10
END-INVOKE|10
END-MULTIPLY|10
END-OF-PAGE|10
END-PERFORM|10
END-READ|10
END-RECEIVE|10
END-RETURN|10
END-REWRITE|10
END-SEARCH|10
END-START|10
END-STRING|10
END-SUBTRACT|10
END-UNSTRING|10
END-WRITE|10`


var COBOL_KEYWORDS_STRIPPED = COBOL_KEYWORDS.replace(/(?:\r\n|\r|\n)/g, ' ');
var COBOL_BUILT_IN_Keywords_STRIPPED = COBOL_BUILT_IN_Keywords.replace(/(?:\r\n|\r|\n)/g, ' ');


var COBOL_STRING = {
  className: "string",
  variants: [{ begin: /'/, end: /'/ , relevance: 5}, { begin: '"', end: '"', relevance: 0 }],
};

var COBOL_COMMENT = hljs.COMMENT(
      '\\*', //begin
	  '\n', //end
	  {
		relevance : 5,
	  }	  
	);

var LITERAL = {
    className: "literal",
    begin: /\$(NULL|TRUE|FALSE)\b/,
	relevance: 0,
  };
  
var SQL= {
	begin: 'EXEC SQL', end: 'END-EXEC',
	subLanguage: 'sql',
	relevance: 10,
};

  return {  
  lexemes: /-?[A-z\-]+/,
  case_insensitive: true, // language is case-insensitive
    keywords: {
	keyword: COBOL_KEYWORDS_STRIPPED,
    built_in: COBOL_BUILT_IN_Keywords_STRIPPED,
  },
  illegal: '\\<|\\@|^([;*]|[.def]|[#include])|[$;]',
  contains: [
    hljs.NUMBER_MODE,
	COBOL_STRING,
	COBOL_COMMENT,
	LITERAL,
	SQL,
  ]
 };
}
